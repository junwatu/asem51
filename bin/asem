#! /usr/bin/env node

'use strict';

const spawn = require('child_process').spawn;
const argv = require('minimist')(process.argv.slice(2));
const ASEM51 = require('../lib/asem51');

let errMessageArray = [];
let file = argv['_'][0];

if (file != undefined) {
    let asem = spawn('asem', ['--columns', file]);

    asem.on('error', err => console.log(err));
    asem.stdout.on('data', (data) => {
        console.log(data);
    });
    asem.stderr.on('data', (data) => {
        console.log(ASEM51.parseError(file, data.toString()));
    });
} else {
    let asem = spawn('asem');
    asem.on('error', err => console.log(err));
    asem.stdout.on('data', data => console.log(data.toString()));
    asem.stderr.on('data', data => console.log(data.toString()));
}
